# управление состоянием

Переменные позволяют хранить, читать и изменять состояние во время игры. Они могут быть использованы для хранения того, на каком уровне находится игрок, сколько здоровья у монстра, скорость объекта, какие объекты находятся в инвентаре персонажа или что-то еще, на самом деле.

Вы можете объявить и инициализировать глобальную переменную в корне скрипта:
```
let currentLevel = 1;
```

Когда происходит какое-то событие, вы можете увеличить значение:

```
// ... Когда игрок достигает выхода ...
currentLevel++;
Sup.loadScene(`Level ${currentLevel}`);
```

Когда вы объявляете переменную внутри функции, она существует только во время выполнения этой функции:

```
function doSomething() {
  let i = 0;
  i++;
  // `i` теперь равняется 1
}
```

Независимо от того, сколько раз вы вызываете `doSomething()`, `i` будет сброшен в `0` а потом `1` но не пойдет выше.

Точно так же, поскольку переменная, объявленная внутри метода, существует только во время выполнения этого метода, вы не можете ссылаться на нее из другого метода:

```
class MyClass {
  doSomething() {
    let i = 0;
  }

  doSomethingElse() {
    // Попытка использовать здесь `i` приведет к ошибке.
    // В контексте doSomethingElse () `переменная` i` отсутствует.
  }
}
```

Чтобы поддерживать состояние, связанное с определенным компонентом поведения (например, здоровье персонажа), вы можете использовать переменные-члены:
```
class MyBehavior extends Sup.Behavior {

  // Переменные-члены должны быть объявлены без ключевого слова let
  // прямо внутри тела класса:
  health = 100;

  takeDamage(amount) {
    // Переменные-члены инициализируются при создании компонента поведения.
    // Вы можете получить доступ к самому поведению и его переменным-членам через `this`.
    this.health -= amount;
    if (this.health <= 0) {
      // Смерть!
      this.actor.destroy();
    }
  }

}
Sup.registerBehavior(MyBehavior);
```

## Настройка свойств поведения

При добавлении компонента поведения к актеру в сцене вы можете настроить начальные значения для его переменных-членов, что позволит вам иметь мобов с разной начальной скоростью, состоянием здоровья и т. Д.

Вы можете сделать то же самое в скрипте, передав объект в качестве второго параметра `Sup.Actor.addBehavior`:

```
let collectedPoints = 0;

class BonusBehavior extends Sup.Behavior {

  // 10 бонусных очков по-умолчанию.
  points = 10;

  pickUp() {
    // Этот метод может быть вызван вашим игроком, когда он встречает бонус
    collectedPoints += this.points;
    this.actor.destroy();
  }

}
Sup.registerBehavior(BonusBehavior);

let bigBonusActor = new Sup.Actor("Big Bonus");
// ... возможно настроить спрайт или рендерер модели ...

// Это большой бонус, поэтому мы переопределяем его значение в 50.
bigBonusActor.addBehavior(BonusBehavior, { points: 50 });
```
